<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="dist/bundle.js" charset="utf-8"></script>
        <title></title>
        <link rel="stylesheet" href="dist/bundle.css" media="screen" title="no title" charset="utf-8">
        <style media="screen">
            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <script type="text/javascript">
            var cm = nsGmx.createGmxApplication(document.body, {
                app: {
                    gmxMap: {
                        mapID: '37TYY',
                        apiKey: 'W4IH6K7CJ4'
                    }
                }
            });

            cm.create().then(function () {
                window.cm = cm;
                window.map = cm.get('map');
                window.lt = cm.get('layersTree');
                window.lh = cm.get('layersHash');
                window.cal = cm.get('calendar');
                console.log('ready');
                mapplet();
            });

            function mapplet() {
                lt.eachNode(function(n) {
                    var l = lh[n.get('id')];
                    if (map.hasLayer(l)) {
                        console.log(n.get('id'), n.get('properties').title, l && l.getDateInterval && l.getDateInterval())
                    }
                })
            }
        </script>
    </body>
</html>
